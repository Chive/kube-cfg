{"name":"kube-cfg","tagline":"Define Kubernetes Stacks through Python","body":"# kube-cfg\r\n\r\n> **Warning:** this is experimental / pre alpha code!\r\n\r\n## Usage\r\n\r\n### Define your stack\r\n\r\n```python\r\nfrom kubecfg.structures import Stack, Container, Port\r\n\r\nstack = Stack(name='example')\r\n\r\nweb = stack.create_component(name='web')\r\nweb.add_controller(\r\n    replicas=1,\r\n    containers=[\r\n        Container(\r\n            name='nginx',\r\n            image='nginx',\r\n            ports=[8000],\r\n        ),\r\n        Container(\r\n            name='redis',\r\n            image='redis',\r\n        ),\r\n    ],\r\n)\r\n\r\nweb.add_service(\r\n    service_type='LoadBalancer',\r\n    controller=web.controller,\r\n    ports=[Port(port=80, target_port=8000, protocol='TCP')],\r\n)\r\n\r\nstack.save('out')\r\n```\r\n\r\n### Execute ``kubecfg``\r\n\r\n```bash\r\n$ python definition.py\r\n$ ls out\r\nexample-web-controller.json  example-web-service.json\r\n```\r\n\r\n### View output and use with ``kubectl``\r\n\r\n#### Controller\r\n\r\n> [``out/example-web-controller.json``](https://github.com/Chive/kubecfg/blob/master/docs/example/out/example-web-controller.json)\r\n\r\n```json\r\n{\r\n  \"apiVersion\": \"v1\", \r\n  \"kind\": \"ReplicationController\", \r\n  \"metadata\": {\r\n    \"labels\": {\r\n      \"component\": \"web\", \r\n      \"stack\": \"example\"\r\n    }, \r\n    \"name\": \"web\"\r\n  }, \r\n  \"spec\": {\r\n    \"replicas\": 1, \r\n    \"template\": {\r\n      \"metadata\": {\r\n        \"labels\": {\r\n          \"component\": \"web\", \r\n          \"stack\": \"example\"\r\n        }, \r\n        \"name\": \"web\"\r\n      }, \r\n      \"spec\": {\r\n        \"containers\": [\r\n          {\r\n            \"image\": \"nginx\", \r\n            \"name\": \"nginx\"\r\n          }, \r\n          {\r\n            \"image\": \"redis\", \r\n            \"name\": \"redis\"\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n#### Service\r\n\r\n> [``out/example-web-service.json``](https://github.com/Chive/kubecfg/blob/master/docs/example/out/example-web-service.json)\r\n\r\n```json\r\n{\r\n  \"apiVersion\": \"v1\", \r\n  \"kind\": \"Service\", \r\n  \"metadata\": {\r\n    \"labels\": {\r\n      \"component\": \"web\", \r\n      \"stack\": \"example\"\r\n    }, \r\n    \"name\": \"web\"\r\n  }, \r\n  \"spec\": {\r\n    \"ports\": [\r\n      {\r\n        \"port\": 80, \r\n        \"protocol\": \"TCP\", \r\n        \"targetPort\": 8000\r\n      }\r\n    ], \r\n    \"selector\": {\r\n      \"component\": \"web\", \r\n      \"stack\": \"example\"\r\n    }, \r\n    \"type\": \"LoadBalancer\"\r\n  }\r\n}\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}